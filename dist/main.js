(()=>{"use strict";(t=>{const e=document.getElementById("timer"),o=document.getElementById("timer-hours"),n=document.getElementById("timer-minutes"),c=document.getElementById("timer-seconds"),r=t=>t<10?"0"+t:t,a=setInterval((()=>{const t=(()=>{const t=(new Date("25 feb 2021").getTime()-(new Date).getTime())/1e3,e=Math.floor(t%60),o=Math.floor(t/60%60);return{timeRemaining:t,hours:Math.floor(t/60/60),minutes:o,seconds:e}})();o.textContent=r(t.hours),n.textContent=r(t.minutes),c.textContent=r(t.seconds),t.timeRemaining<=0&&(clearInterval(a),o.textContent="00",n.textContent="00",c.textContent="00",e.style.color="red")}),1e3)})(),(()=>{const t=document.querySelector("menu"),e=()=>{t.classList.toggle("active-menu")};document.addEventListener("click",(o=>{let n=o.target;n=n.closest(".menu"),n?e():(n=o.target,n.classList.contains("close-btn")?e():(n=n.closest("ul>li"),t.contains(n)?e():(n=o.target,n=n.closest("menu"),n||t.classList.remove("active-menu"))))}))})(),(()=>{const t=document.querySelectorAll('a[href*="#"]');for(const e of t)e.addEventListener("click",(t=>{t.preventDefault();const o=e.getAttribute("href").substring(1);document.getElementById(o).scrollIntoView({behavior:"smooth",block:"start"})}))})(),(()=>{const t=document.querySelector(".popup");document.querySelectorAll(".popup-btn").forEach((e=>{e.addEventListener("click",(()=>{t.style.display="block",window.innerWidth>=768&&(({duration:t,draw:e,timing:o})=>{const n=performance.now();requestAnimationFrame((function c(r){let a=(r-n)/t;a>1&&(a=1);const s=o(a);e(s),a<1&&requestAnimationFrame(c)}))})({duration:500,timing:t=>Math.pow(t,3),draw(e){t.style.opacity=e}})}))})),t.addEventListener("click",(e=>{let o=e.target;o.classList.contains("popup-close")?t.style.display="none":(o=o.closest(".popup-content"),o||(t.style.display="none"))}))})(),(()=>{const t=document.querySelector(".service-header"),e=t.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");t.addEventListener("click",(t=>{let n=t.target;n=n.closest(".service-header-tab"),n&&e.forEach(((t,c)=>{t===n&&(t=>{for(let n=0;n<o.length;n++)t===n?(e[n].classList.add("active"),o[n].classList.remove("d-none")):(e[n].classList.remove("active"),o[n].classList.add("d-none"))})(c)}))}))})(),(()=>{const t=document.querySelectorAll(".portfolio-item"),e=document.querySelector(".portfolio-content"),o=document.querySelector(".portfolio-dots");let n=document.querySelectorAll(".dot");(()=>{for(let e=0;e<t.length;e++){const t=document.createElement("li");t.classList.add("dot"),o.appendChild(t)}n=document.querySelectorAll(".dot"),n[0].classList.add("dot-active")})();let c,r=0;const a=(t,e,o)=>{t[e].classList.remove(o)},s=(t,e,o)=>{t[e].classList.add(o)},l=()=>{a(t,r,"portfolio-item-active"),a(n,r,"dot-active"),r++,r>=t.length&&(r=0),s(t,r,"portfolio-item-active"),s(n,r,"dot-active")},i=(t=2e3)=>{c=setInterval(l,t)};e.addEventListener("click",(e=>{e.preventDefault();const o=e.target;o.matches(".portfolio-btn, .dot")&&(a(t,r,"portfolio-item-active"),a(n,r,"dot-active"),o.matches("#arrow-right")?r++:o.matches("#arrow-left")?r--:o.matches(".dot")&&n.forEach(((t,e)=>{t===o&&(r=e)})),r>=t.length&&(r=0),r<0&&(r=t.length-1),s(t,r,"portfolio-item-active"),s(n,r,"dot-active"))})),e.addEventListener("mouseover",(t=>{(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&clearInterval(c)})),e.addEventListener("mouseout",(t=>{(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&i()})),i(2e3)})(),(()=>{const t=document.getElementById("command");t.addEventListener("mouseover",(t=>{const e=t.target;e.matches(".command__photo")&&(e.dataset.firstImg=e.getAttribute("src"),e.src=e.dataset.img)})),t.addEventListener("mouseout",(t=>{const e=t.target;e.matches(".command__photo")&&(e.src=e.dataset.firstImg)}))})(),document.querySelectorAll(".calc input").forEach((t=>{t.addEventListener("input",(()=>{const e=t.value;t.value=e.replace(/\D/g,"")}))})),document.addEventListener("input",(t=>{const e=t.target;let o=e.value;e.matches(".form-name")?e.value=o.replace(/[^А-Яа-яЁё\\ ]/g,""):e.matches(".form-email")?e.value=o.replace(/[^A-z\\@\\-\\_\\.\\!\\~\\*\\']/g,""):e.matches(".form-phone")?e.value=o.replace(/[^\d\\()\\-\\+]/g,""):e.matches(".mess")&&(e.value=o.replace(/[^А-Яа-яЁё,\\.\\?\\!\\ -]/g,"")),e.addEventListener("blur",(()=>{o=e.value,o=o.replace(/\s+/g," "),o=o.replace(/-+/g,"-"),o=o.replace(/\++/g,"+"),o=o.replace(/@+/g,"@"),o=o.replace(/^ |^-| $|-$/g,""),e.matches(".form-name")&&(o=o.replace(/.+/g,(t=>t.toLowerCase())),o=o.replace(/(^|\s|-)\S/g,(t=>t.toUpperCase()))),e.value=o}))})),((t=100)=>{const e=({duration:t,draw:e,timing:o})=>{const n=performance.now();requestAnimationFrame((function c(r){let a=(r-n)/t;a>1&&(a=1);const s=o(a);e(s),a<1&&requestAnimationFrame(c)}))},o=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),c=document.querySelector(".calc-square"),r=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),s=document.getElementById("total");o.addEventListener("change",(o=>{const l=o.target;(l.matches("select")||l.matches("input"))&&(()=>{let o=0,l=1,i=1;const d=n.options[n.selectedIndex].value,m=+c.value;a.value>1&&(l+=(a.value-1)/10),r.value&&r.value<5?i*=2:r.value&&r.value<10&&(i*=1.5),d&&m?(o=t*d*m*l*i,e({duration:800,timing:t=>Math.pow(t,3),draw(t){s.textContent=Math.floor(o*t)}})):0!==d&&0!==m||e({duration:800,timing:t=>1-Math.pow(t,3),draw(t){s.textContent=Math.floor(t*s.textContent)}})})()}))})(100),(()=>{const t=document.querySelectorAll("form"),e=document.createElement("div");e.style.cssText="\n\t\t\tfont-size: 2rem;\n\t\t\tcolor: white;\n\t\t\t",e.innerHTML='\n\t\t\t<div id="floatingCirclesG">\n\t\t\t\t<div class="f_circleG" id="frotateG_01"></div>\n\t\t\t\t<div class="f_circleG" id="frotateG_02"></div>\n\t\t\t\t<div class="f_circleG" id="frotateG_03"></div>\n\t\t\t\t<div class="f_circleG" id="frotateG_04"></div>\n\t\t\t\t<div class="f_circleG" id="frotateG_05"></div>\n\t\t\t\t<div class="f_circleG" id="frotateG_06"></div>\n\t\t\t\t<div class="f_circleG" id="frotateG_07"></div>\n\t\t\t\t<div class="f_circleG" id="frotateG_08"></div>\n\t\t\t</div>\n\t\t',t.forEach((t=>{t.addEventListener("submit",(o=>{o.preventDefault(),t.appendChild(e);const n=new FormData(t),c={};n.forEach(((t,e)=>{c[e]=t})),(t=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}))(c).then((t=>{if(200!==t.status)throw new Error("status network not 200");e.textContent="Спасибо! Мы скоро с вами свяжемся!",document.querySelectorAll("form input").forEach((t=>{t.value=""}))})).catch((t=>{e.textContent="Что то пошло не так...",console.error(t)}))}))}))})()})();